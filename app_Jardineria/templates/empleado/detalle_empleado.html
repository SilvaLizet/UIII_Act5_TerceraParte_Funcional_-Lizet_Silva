{% extends 'base.html' %}

{% block title %}Detalle Empleado{% endblock %}

{% block content %}
<h2 class="mb-4 text-success">Detalles del Empleado: {{ empleado.nombre }} {{ empleado.apellido }}</h2>
<div class="card p-4 border-success shadow-sm">
    <div class="card-body">
        <p class="card-text"><strong>ID:</strong> {{ empleado.id }}</p>
        <p class="card-text"><strong>Nombre:</strong> {{ empleado.nombre }}</p>
        <p class="card-text"><strong>Apellido:</strong> {{ empleado.apellido }}</p>
        <p class="card-text"><strong>Puesto:</strong> {{ empleado.puesto }}</p>
        <p class="card-text"><strong>Teléfono:</strong> {{ empleado.telefono }}</p>
        <p class="card-text"><strong>Email:</strong> {{ empleado.email }}</p>
        <p class="card-text"><strong>Fecha Contratación:</strong> {{ empleado.fecha_contratacion|date:"d/m/Y" }}</p>
        <p class="card-text"><strong>Salario:</strong> ${{ empleado.salario|floatformat:2 }}</p>

        <h4 class="mt-4 text-success">Contratos de Servicio Asignados</h4>
        {% if servicios_asignados %}
            <ul class="list-group">
                {% for contrato in servicios_asignados %}
                    <li class="list-group-item">
                        Contrato #{{ contrato.id }} - Cliente: <strong>{{ contrato.cliente.nombre }} {{ contrato.cliente.apellido }}</strong>
                        - Servicio: <strong>{{ contrato.servicio.nombre_servicio }}</strong>
                        (Programado para: {{ contrato.fecha_programada|date:"d/m/Y" }}) - Estado: {{ contrato.get_estado_display }}
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Este empleado no tiene servicios asignados en contratos.</p>
        {% endif %}

        <div class="mt-4">
            <a href="{% url 'actualizar_empleado' empleado.id %}" class="btn btn-warning me-2"><i class="fas fa-edit me-2"></i>Editar Empleado</a>
            <a href="{% url 'ver_empleados' %}" class="btn btn-secondary"><i class="fas fa-arrow-left me-2"></i>Volver a Empleados</a>
        </div>
    </div>
</div>
{% endblock %}